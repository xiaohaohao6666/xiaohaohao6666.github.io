<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript数据结构（4）：树 | Evan-Blog</title>
    <meta name="description" content="与其纠结无法改变的过去,不如微笑的面对未来，因为生活，没有如果">
    <link rel="icon" href="/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.919eb087.css" as="style"><link rel="preload" href="/assets/js/app.0bd50222.js" as="script"><link rel="preload" href="/assets/js/2.6fd8f351.js" as="script"><link rel="preload" href="/assets/js/31.f1ea7050.js" as="script"><link rel="prefetch" href="/assets/js/10.5e392867.js"><link rel="prefetch" href="/assets/js/11.84f1836c.js"><link rel="prefetch" href="/assets/js/12.8f316b4a.js"><link rel="prefetch" href="/assets/js/13.14475169.js"><link rel="prefetch" href="/assets/js/14.ded4b88e.js"><link rel="prefetch" href="/assets/js/15.0b995197.js"><link rel="prefetch" href="/assets/js/16.116588f7.js"><link rel="prefetch" href="/assets/js/17.5b816f87.js"><link rel="prefetch" href="/assets/js/18.d1ef4c96.js"><link rel="prefetch" href="/assets/js/19.6d944fe8.js"><link rel="prefetch" href="/assets/js/20.9d512630.js"><link rel="prefetch" href="/assets/js/21.8fdec6e1.js"><link rel="prefetch" href="/assets/js/22.2cb5666e.js"><link rel="prefetch" href="/assets/js/23.dfc1334c.js"><link rel="prefetch" href="/assets/js/24.4b5c23c2.js"><link rel="prefetch" href="/assets/js/25.350f5bde.js"><link rel="prefetch" href="/assets/js/26.1b8b511f.js"><link rel="prefetch" href="/assets/js/27.eca3f782.js"><link rel="prefetch" href="/assets/js/28.151f30c6.js"><link rel="prefetch" href="/assets/js/29.381db2e3.js"><link rel="prefetch" href="/assets/js/3.61ea6075.js"><link rel="prefetch" href="/assets/js/30.ded9e5f7.js"><link rel="prefetch" href="/assets/js/32.28eb4a8a.js"><link rel="prefetch" href="/assets/js/33.4a3190e3.js"><link rel="prefetch" href="/assets/js/34.5883e361.js"><link rel="prefetch" href="/assets/js/35.905b0317.js"><link rel="prefetch" href="/assets/js/36.ae5f3b67.js"><link rel="prefetch" href="/assets/js/37.9a212de8.js"><link rel="prefetch" href="/assets/js/38.f54db468.js"><link rel="prefetch" href="/assets/js/39.673f6aed.js"><link rel="prefetch" href="/assets/js/4.47b1dc0d.js"><link rel="prefetch" href="/assets/js/40.0d86b015.js"><link rel="prefetch" href="/assets/js/41.2b6fb392.js"><link rel="prefetch" href="/assets/js/42.aab801fd.js"><link rel="prefetch" href="/assets/js/43.05891ba6.js"><link rel="prefetch" href="/assets/js/44.5eda5d3e.js"><link rel="prefetch" href="/assets/js/45.d36197be.js"><link rel="prefetch" href="/assets/js/5.a5e71125.js"><link rel="prefetch" href="/assets/js/6.6b062761.js"><link rel="prefetch" href="/assets/js/7.15eb1c76.js"><link rel="prefetch" href="/assets/js/8.1d568626.js"><link rel="prefetch" href="/assets/js/9.1a8c218a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.919eb087.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Evan-Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端之路</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/web/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/web/javascript/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><a href="/life/" class="nav-link">平凡之路</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/xiaohaohao6666" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端之路</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/web/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/web/javascript/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><a href="/life/" class="nav-link">平凡之路</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/xiaohaohao6666" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript面试题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript面向对象编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript数据结构</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/jsDataStructures/" class="sidebar-link">JavaScript 数据结构（1）：什么是数据结构？</a></li><li><a href="/web/jsDataStructures/one.html" class="sidebar-link">JavaScript 数据结构（2-1）：栈与队列-栈篇</a></li><li><a href="/web/jsDataStructures/two.html" class="sidebar-link">JavaScript 数据结构（2-2）：栈与队列-队列篇</a></li><li><a href="/web/jsDataStructures/three.html" class="sidebar-link">JavaScript数据结构(3-1)：单向链表与双向链表——单向链表篇</a></li><li><a href="/web/jsDataStructures/four.html" class="sidebar-link">JavaScript数据结构(3-2)：单向链表与双向链表——双向链表篇</a></li><li><a href="/web/jsDataStructures/five.html" class="active sidebar-link">JavaScript数据结构（4）：树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/jsDataStructures/five.html#树（深度搜索和广度搜索）" class="sidebar-link">树（深度搜索和广度搜索）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/jsDataStructures/five.html#操作树" class="sidebar-link">操作树</a></li><li class="sidebar-sub-header"><a href="/web/jsDataStructures/five.html#树的的完整实现" class="sidebar-link">树的的完整实现</a></li><li class="sidebar-sub-header"><a href="/web/jsDataStructures/five.html#总结" class="sidebar-link">总结</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript数据结构与算法之美</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>V8 引擎解析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue-cli3.0使用教程</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript数据结构（4）：树"><a href="#javascript数据结构（4）：树" aria-hidden="true" class="header-anchor">#</a> JavaScript数据结构（4）：树</h1> <p>树是 web 开发中最常用的数据结构之一。 这种说法对开发者和用户都是正确的。每个编写HTML的开发者，只要把网页载入浏览器就会创建一个树，树通常被称为文档对象模型（DOM）。相应地，每个在互联网上浏览信息的人，也都是以DOM树的形式接受信息。 每个编写HTML并且将其加载到Web浏览器的Web开发人员都创建了一个树，这被称为文档对象模型（DOM）。互联网上的所有用户，在获取信息时，都是以树的形式收——即DOM。</p> <div class="language-html extra-class"><pre class="language-html"><code>现在，高潮来了：你正在读的本文在浏览器中就是以树的形式进行渲染的。

文字由<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>元素进行表示；<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>元素又嵌套在<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>元素中；<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>元素又嵌套在<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>元素中。 

您正在阅读的段落表示为<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>元素中的文本；<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>元素嵌套在<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>元素中；<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>元素嵌套在<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>元素中。

这些嵌套数据和家族数类似。 

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>是父元素，<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>是子元素，<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>又是<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>的子元素 

如果这个比喻对你有点用的话，你将会发现在我们介绍树的时候会用到更多的类比。
</code></pre></div><p>在本文中，我们将会通过两种不同的遍历方式来创建一个树：深度优先(DFS)和广度优先(BFS)。 （如果你对遍历这个词感到比较陌生，不妨将他想象成访问树中的每一个节点。） 这两种类型的遍历强调了与树交互的不同方式， DFS和BFS分别用栈和队列来访问节点。 这听起来很酷！</p> <h2 id="树（深度搜索和广度搜索）"><a href="#树（深度搜索和广度搜索）" aria-hidden="true" class="header-anchor">#</a> 树（深度搜索和广度搜索）</h2> <p>在计算机科学中，树是一种用节点来模拟分层数据的数据结构。每个树节点都包含他本身的数据及指向其他节点的指针。</p> <p>节点和指针这些术语可能对一些读者来说比较陌生，所以让我们用类比来进一步描述他们。 让我们将树与组织图结构图进行比较。 这个结构图有一个顶级位置（根节点），比如CEO。 在这个节点下面还有一些其他的节点，比如副总裁(VP)。</p> <p>为了表示这种关系，我们用箭头从CEO指向VP。 一个位置，比如CEO，是一个节点；我们创建的CEO到VP的关系是一个指针。 在我们的组织结构图中去创建更多的关系，我们只要重复这些步骤即可—我们让一个节点指向另一个节点。</p> <div class="language-html extra-class"><pre class="language-html"><code>在概念层次上，我希望节点和指针有意义。 在实际中，我们能从更科学的实例中获取收益。

让我们来思考DOM。 DOM有<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>元素作为其顶级位置（根节点）。 

这个节点指向<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>元素和<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>元素。 这些步骤在DOM的所有节点中重复。


这种设计的一个优点是能够嵌套节点：例如：一个<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>元素能够包含很多个<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>元素；

此外，每个<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>元素能拥有兄弟<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>元素。这很怪异，但是确实真实有趣！
</code></pre></div><h3 id="操作树"><a href="#操作树" aria-hidden="true" class="header-anchor">#</a> 操作树</h3> <p>由于每个树都包含节点，其可以是来自树的单独构造器，我们将概述两个构造函数的操作：Node和Tree</p> <div class="tip custom-block"><p class="custom-block-title">节点</p> <p>data 存储值。</p> <p>parent 指向节点的父节点。</p> <p>children 指向列表中的下一个节点。</p></div> <div class="tip custom-block"><p class="custom-block-title">树</p> <p>_root 指向一个树的根节点。</p> <p>traverseDF(callback) 对树进行DFS遍历。</p> <p>traverseBF(callback) 对树进行BFS遍历。</p> <p>contains(data, traversal) 搜索树中的节点。</p> <p>add(data, toData, traverse) 向树中添加节点。</p> <p>remove(child, parent) 移除树中的节点。</p></div> <h4 id="实现树"><a href="#实现树" aria-hidden="true" class="header-anchor">#</a> 实现树</h4> <p>现在开始写树的代码！</p> <h4 id="节点的属性"><a href="#节点的属性" aria-hidden="true" class="header-anchor">#</a> 节点的属性</h4> <p>在实现中，我们首先定义一个叫做Node的函数，然后构造一个Tree。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>每一个Node的实例都包含三个属性：data，parant，和children。 第一个属性保存与节点相关联的数据。 第二个属性指向一个节点。 第三个属性指向许多子节点。</p> <h4 id="树的属性"><a href="#树的属性" aria-hidden="true" class="header-anchor">#</a> 树的属性</h4> <p>现在让我们来定义Tree的构造函数，其中包括Node构造函数的定义：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Tree</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_root <span class="token operator">=</span> node<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Tree包含两行代码。 第一行创建了一个Node的新实例；第二行让node等于树的根节点。</p> <p>Tree和Node的定义只需要几行代码。 但是，通过这几行足以帮助我们模拟分层数据。 为了证明这一点，让我们用一些示例数据去创建Tree的示例（和间接的Node）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> tree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tree</span><span class="token punctuation">(</span><span class="token string">'CEO'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// {data: 'CEO', parent: null, children: []}tree._root;</span>
</code></pre></div><p>幸好有parent和children的存在，我们可以为_root添加子节点和让这些子节点的父节点等于_root。 换一种说法，我们可以模拟分层数据的创建。</p> <h4 id="tree的方法"><a href="#tree的方法" aria-hidden="true" class="header-anchor">#</a> Tree的方法</h4> <p>接下来我们将要创建以下五种方法。</p> <div class="tip custom-block"><p class="custom-block-title">树</p> <p>1.traverseDF(callback)</p> <p>2.traverseBF(callback)</p> <p>3.contains(data, traversal)</p> <p>4.add(child, parent)</p> <p>5.remove(node, parent)</p></div> <p>因为每种方法都需要遍历一个树，所以我们首先要实现一个方法去定义不同的树遍历。 （遍历树是访问树的每个节点的正式方式。）</p> <h4 id="方法1-5-traversedf-callback"><a href="#方法1-5-traversedf-callback" aria-hidden="true" class="header-anchor">#</a> 方法1/5: traverseDF(callback)</h4> <p>这种方法以深度优先方式遍历树。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Tree</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">traverseDF</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
    <span class="token comment">// this is a recurse and immediately-invoking function </span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">recurse</span><span class="token punctuation">(</span><span class="token parameter">currentNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// step 2</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// step 3</span>
            <span class="token function">recurse</span><span class="token punctuation">(</span>currentNode<span class="token punctuation">.</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token comment">// step 4</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>currentNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
         
        <span class="token comment">// step 1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_root<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>traverseDF(callback)有一个参数callback。 如果对这个名字不明白，callback被假定是一个函数，将在后面被traverseDF(callback)调用。</p> <p>traverseDF(callback)的函数体含有另一个叫做recurse的函数。 这个函数是一个递归函数！ 换句话说，它是自我调用和自我终止。 使用recurse的注释中提到的步骤，我将描述递归用来recurse整个树的一般过程。</p> <div class="tip custom-block"><p class="custom-block-title">这里是步骤：</p> <p>1.立即使用树的根节点作为其参数调用recurse。 此时，currentNode指向当前节点。</p> <p>2.进入for循环并且从第一个子节点开始，每一个子节点都迭代一次currentNode函数。</p> <p>3.在for循环体内，使用currentNode的子元素调用递归。 确切的子节点取决于当前for循环的当前迭代。</p> <p>4.当currentNode不存在子节点时，我们退出for循环并callback我们在调用traverseDF（callback）期间传递的回调。</p></div> <p>步骤2（自终止），3（自调用）和4（回调）重复，直到我们遍历树的每个节点。</p> <p>递归是一个非常困难的话题，需要一个完整的文章来充分解释它。由于递归的解释不是本文的重点 —— 重点是实现一棵树 —— 我建议任何读者没有很好地掌握递归做以下两件事。</p> <p>首先，实验我们当前的traverseDF(callback)实现，并尝试一定程度上理解它是如何工作的。 第二，如果你想要我写一篇关于递归的文章，那么请在本文的评论中请求它。</p> <p>以下示例演示如何使用traverseDF(callback)遍历树。要遍历树，我将在下面的示例中创建一个。我现在使用的方法不是罪理想的，但它能很好的工作。 一个更好的方法是使用add(value)，我们将在第4步和第5步中实现。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> tree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tree</span><span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token string">'two'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> tree<span class="token punctuation">;</span>
tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token string">'three'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> tree<span class="token punctuation">;</span>
tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token string">'four'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> tree<span class="token punctuation">;</span>
tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token string">'five'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token string">'six'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token string">'seven'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> tree<span class="token punctuation">.</span>_root<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">/*
 
creates this tree
 
    one
    ├── two
    │   ├── five
    │   └── six
    ├── three
    └── four
        └── seven
 
*/</span>
</code></pre></div><p>现在，让我们调用traverseDF(callback)。</p> <div class="language-js extra-class"><pre class="language-js"><code>tree<span class="token punctuation">.</span><span class="token function">traverseDF</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
 
logs the following strings to the console
 
'five'
'six'
'two'
'three'
'seven'
'four'
'one'
 
*/</span>
</code></pre></div><h4 id="方法2-5-traversebf-callback"><a href="#方法2-5-traversebf-callback" aria-hidden="true" class="header-anchor">#</a> 方法2/5: traverseBF(callback)</h4> <p>这个方法使用深度优先搜索去遍历树</p> <p>深度优先搜索和广度优先搜索之间的差别涉及树的节点访问的序列。 为了说明这一点，让我们使用traverseDF(callback)创建的树。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* 
 tree
 
 one (depth: 0)
 ├── two (depth: 1)
 │   ├── five (depth: 2)
 │   └── six (depth: 2)
 ├── three (depth: 1)
 └── four (depth: 1)
     └── seven (depth: 2)
*/</span>
</code></pre></div><p>现在，让我们传递traverseBF(callback)和我们用于traverseDF（callback）的回调。</p> <div class="language-js extra-class"><pre class="language-js"><code>tree<span class="token punctuation">.</span><span class="token function">traverseBF</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
 
logs the following strings to the console
 
'one'
'two'
'three'
'four'
'five'
'six'
'seven'
 
*/</span>
</code></pre></div><p>来自控制台的日志和我们的树的图显示了关于广度优先搜索的模式。从根节点开始；然后行进一个深度并访问该深度从左到右的每个节点。重复此过程，直到没有更多的深度要移动。</p> <p>由于我们有一个广度优先搜索的概念模型，现在让我们实现使我们的示例工作的代码。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Tree</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">traverseBF</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     
    queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_root<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    currentTree <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">while</span><span class="token punctuation">(</span>currentTree<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> currentTree<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>currentTree<span class="token punctuation">.</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token function">callback</span><span class="token punctuation">(</span>currentTree<span class="token punctuation">)</span><span class="token punctuation">;</span>
        currentTree <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>我们对traverseBF(callback)的定义包含了很多逻辑。</p> <div class="tip custom-block"><p class="custom-block-title">因此，我会用下面的步骤解释这些逻辑：</p> <p>1.创建 Queue的实例。</p> <p>2.调用traverseBF(callback)产生的节点添加到Queue的实例。</p> <p>3.定义一个变量currentNode并且将其值初始化为刚才添加到队列里的node</p> <p>4.当currentNode指向一个节点时，执行wille循环里面的代码。</p> <p>5.用for循环去迭代currentNode的子节点。</p> <p>6.在for循环体内，将每个子元素加入队列。</p> <p>7.获取currentNode并将其作为callback的参数传递。</p> <p>8.将currentNode重新分配给正从队列中删除的节点。</p> <p>9.直到currentNode不再指向任何节点——也就是说树中的每个节点都访问过了——重复4-8步。</p></div> <h4 id="方法3-5-contains-callback-traversal"><a href="#方法3-5-contains-callback-traversal" aria-hidden="true" class="header-anchor">#</a> 方法3/5 contains(callback, traversal)</h4> <p>让我们定义一个方法，可以在树中搜索一个特定的值。去使用我们创建的任意一种树的遍历方法，我们已经定义了contains(callback, traversal)接收两个参数：搜索的数据和遍历的类型。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Tree</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">contains</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> traversal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">traversal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在contains(callback, traversal)函数体内，我们用call方法去传递this和callback。 第一个参数将traversal绑定到被调用的树contains（callback，traversal）；第二个参数是在树中每个节点上调用的函数。</p> <p>想象一下，我们要将包含奇数数据的任何节点记录到控制台，并使用BFS遍历树中的每个节点。 我们可以这么写代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// tree is an example of a root node</span>
tree<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">'two'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> tree<span class="token punctuation">.</span>traverseBF<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">add</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> toData<span class="token punctuation">,</span> traversal<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="方法4-5-add-data-todata-traversal"><a href="#方法4-5-add-data-todata-traversal" aria-hidden="true" class="header-anchor">#</a> 方法4/5: add(data, toData, traversal)</h4> <p>现在有了一个可以搜索树中特定节点的方法。 让我们定义一个允许向指定节点添加节点的方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Tree</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> toData<span class="token punctuation">,</span> traversal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
        parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>data <span class="token operator">===</span> toData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                parent <span class="token operator">=</span> node<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> traversal<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        parent<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
        child<span class="token punctuation">.</span>parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Cannot add node to a non-existent parent.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>add(data, toData, traversal)定义了三个参数。 第一个参数data用来创建一个Node的新实例。 第二个参数toData用来比较树中的每个节点。 第三个参数traversal，是这个方法中用来遍历树的类型。</p> <p>在add(data, toData, traversal)函数体内，我们声明了三个变量。 第一个变量child代表初始化的Node实例。 第二个变量parent初始化为null；但是将来会指向匹配toData值的树中的任意节点。parent的重新分配发生在我们声明的第三个变量，这就是callback。</p> <p>callback是一个将toData和每一个节点的data属性做比较的函数。 如果if语句的值是true，那么parent将被赋值给if语句中匹配比较的节点。</p> <p>每个节点的toData在contains(callback, traversal)中进行比较。遍历类型和callback必须作为contains(callback, traversal)的参数进行传递。</p> <p>最后，如果parent不存在于树中，我们将child推入parent.children； 同时也要将parent赋值给child的父级。否则，将抛出错误。</p> <p>让我们用add(data, toData, traversal)做个例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> tree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tree</span><span class="token punctuation">(</span><span class="token string">'CEO'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tree<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'VP of Happiness'</span><span class="token punctuation">,</span> <span class="token string">'CEO'</span><span class="token punctuation">,</span> tree<span class="token punctuation">.</span>traverseBF<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
 
our tree
 
'CEO'
└── 'VP of Happiness'
 
*/</span>
</code></pre></div><p>这里是add(addData, toData, traversal)的更加复杂的例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> tree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tree</span><span class="token punctuation">(</span><span class="token string">'CEO'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tree<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'VP of Happiness'</span><span class="token punctuation">,</span> <span class="token string">'CEO'</span><span class="token punctuation">,</span> tree<span class="token punctuation">.</span>traverseBF<span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'VP of Finance'</span><span class="token punctuation">,</span> <span class="token string">'CEO'</span><span class="token punctuation">,</span> tree<span class="token punctuation">.</span>traverseBF<span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'VP of Sadness'</span><span class="token punctuation">,</span> <span class="token string">'CEO'</span><span class="token punctuation">,</span> tree<span class="token punctuation">.</span>traverseBF<span class="token punctuation">)</span><span class="token punctuation">;</span>
tree<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'Director of Puppies'</span><span class="token punctuation">,</span> <span class="token string">'VP of Finance'</span><span class="token punctuation">,</span> tree<span class="token punctuation">.</span>traverseBF<span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'Manager of Puppies'</span><span class="token punctuation">,</span> <span class="token string">'Director of Puppies'</span><span class="token punctuation">,</span> tree<span class="token punctuation">.</span>traverseBF<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
 
 tree
 
 'CEO'
 ├── 'VP of Happiness'
 ├── 'VP of Finance'
 │   ├── 'Director of Puppies'
 │   └── 'Manager of Puppies'
 └── 'VP of Sadness'
 
*/</span>
</code></pre></div><h4 id="方法5-5-remove-data-fromdata-traversal"><a href="#方法5-5-remove-data-fromdata-traversal" aria-hidden="true" class="header-anchor">#</a> 方法5/5:remove(data, fromData, traversal)</h4> <p>为了完成Tree的实现，我们将添加一个叫做remove(data, fromData, traversal)的方法。 跟从DOM里面移除节点类似，这个方法将移除一个节点和他的所有子级。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Tree</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> fromData<span class="token punctuation">,</span> traversal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> tree <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
        parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        childToRemove <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        index<span class="token punctuation">;</span>
 
    <span class="token keyword">var</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>data <span class="token operator">===</span> fromData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            parent <span class="token operator">=</span> node<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> traversal<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        index <span class="token operator">=</span> <span class="token function">findIndex</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>children<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Node to remove does not exist.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            childToRemove <span class="token operator">=</span> parent<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Parent does not exist.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">return</span> childToRemove<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>与add(data, toData, traversal)类似，移除将遍历树以查找包含第二个参数的节点，现在为fromData。 如果这个节点被发现了，那么parent将指向它。</p> <p>在这时候，我们到达了第一个if语句。 如果parent不存在，将抛出错误。 如果parent不存在，我们使用parent.children调用findIndex（）和我们要从parent节点的子节点中删除的数据 （findIndex（）是一个帮助方法，我将在下面定义。）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> index<span class="token punctuation">;</span>
 
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data <span class="token operator">===</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            index <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">return</span> index<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在findIndex()里面，以下逻辑将发生。 如果parent.children中的任意一个节点包含匹配data值的数据,那么变量index赋值为一个整数。 如果没有子级的数值属性匹配data，那么index保留他的默认值undefined。 在最后一行的findIndex()方法，我们返回一个index。</p> <p>我们现在去remove(data, fromData, traversal)如果index的值是undefined，将会抛出错误。 如果index的值存在，我们用它来拼接我们想从parent的子节点中删除的节点。同样我们给删除的子级赋值为childToRemove。</p> <p>最后，我们返回childToRemove。</p> <h3 id="树的的完整实现"><a href="#树的的完整实现" aria-hidden="true" class="header-anchor">#</a> 树的的完整实现</h3> <p>到此为止Tree已经完全实现。回过头看看，我们到底完成了多少工作：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
 <span class="token keyword">function</span> <span class="token function">Tree</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_root <span class="token operator">=</span> node<span class="token punctuation">;</span><span class="token punctuation">}</span>
 <span class="token class-name">Tree</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">traverseDF</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
    <span class="token comment">// this is a recurse and immediately-invoking function</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">recurse</span><span class="token punctuation">(</span><span class="token parameter">currentNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// step 2</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// step 3</span>
            <span class="token function">recurse</span><span class="token punctuation">(</span>currentNode<span class="token punctuation">.</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token comment">// step 4</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>currentNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token comment">// step 1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_root<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token class-name">Tree</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">traverseBF</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_root<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    currentTree <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">while</span><span class="token punctuation">(</span>currentTree<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> currentTree<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>currentTree<span class="token punctuation">.</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token function">callback</span><span class="token punctuation">(</span>currentTree<span class="token punctuation">)</span><span class="token punctuation">;</span>
        currentTree <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token class-name">Tree</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">contains</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> traversal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">traversal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token class-name">Tree</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> toData<span class="token punctuation">,</span> traversal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
        parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>data <span class="token operator">===</span> toData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                parent <span class="token operator">=</span> node<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> traversal<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        parent<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
        child<span class="token punctuation">.</span>parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Cannot add node to a non-existent parent.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token class-name">Tree</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> fromData<span class="token punctuation">,</span> traversal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> tree <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
        parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        childToRemove <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        index<span class="token punctuation">;</span>
 
    <span class="token keyword">var</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>data <span class="token operator">===</span> fromData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            parent <span class="token operator">=</span> node<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> traversal<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        index <span class="token operator">=</span> <span class="token function">findIndex</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>children<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Node to remove does not exist.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            childToRemove <span class="token operator">=</span> parent<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Parent does not exist.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">return</span> childToRemove<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">function</span> <span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> index<span class="token punctuation">;</span>
 
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data <span class="token operator">===</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            index <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">return</span> index<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h3> <p>树可以用来模拟分层数据。我们周围有许多类似这种类型的层次结构，例如网页和族谱。当你发现自己需要使用层次结构来结构化数据时，可以考虑使用树。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/web/jsDataStructures/four.html" class="prev">
          JavaScript数据结构(3-2)：单向链表与双向链表——双向链表篇
        </a></span> <span class="next"><a href="/web/jsDataStructures2/">
          JavaScript数据结构与算法之美
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0bd50222.js" defer></script><script src="/assets/js/2.6fd8f351.js" defer></script><script src="/assets/js/31.f1ea7050.js" defer></script>
  </body>
</html>
