(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{165:function(t,a,s){"use strict";s.r(a);var n=s(0),r=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"javascript-预编译原理分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javascript-预编译原理分析","aria-hidden":"true"}},[t._v("#")]),t._v(" JavaScript 预编译原理分析")]),t._v(" "),s("p",[t._v("JavaScript的 "),s("strong",[t._v("预编译")]),t._v(", 这个东西在我开始学习 JavaScript ,甚至已经工作一段时间之后我都没有花费一定的时间去了解这个 "),s("strong",[t._v("预编译")]),t._v(" 到底是什么, 当我有时间对 JavaScript 进行回顾时发现自己对 JavaScript 甚至知之甚少, 这篇文档主要记录我对  JavaScript "),s("strong",[t._v("预编译")]),t._v(" ,一个理解, 如有理解错误, 敬请谅解, 可以提出给我, 还是要啰嗦一下, 首先我们要先了解 JavaScript 以下的概念, 这样对于我们再去学习 JavaScript 预编译有很大的帮助。")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("JS 的概念")]),t._v(" "),s("p",[t._v("JavaScript ( JS ) 是一种具有函数优先的轻量级解释型或即时编译型的编程语言。")]),t._v(" "),s("p",[s("strong",[t._v("JS语言特点")])]),t._v(" "),s("ol",[s("li",[t._v("单线程")])]),t._v(" "),s("ul",[s("li",[t._v("JavaScript语言的一大特点就是单线程，也就是说，同一个时间只能做一件事。那么，为什么JavaScript不能有多个线程呢？这样能提高效率。")]),t._v(" "),s("li",[t._v("JavaScript的单线程，与它的用途有关。作为浏览器脚本语言，JavaScript的主要用途是与用户互动，以及操作DOM。这决定了它只能是单线程，否则会带来很复杂的同步问题。比如，假定JavaScript同时有两个线程，一个线程在某个DOM节点上添加内容，另一个线程删除了这个节点，这时浏览器应该以哪个线程为准？")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("解释型语言")])]),t._v(" "),s("ul",[s("li",[t._v("解释一行，执行一行；不通篇编译为一个文件再执行。")])])]),t._v(" "),s("h2",{attrs:{id:"_1-javascript运行三部曲"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-javascript运行三部曲","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.JavaScript运行三部曲")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("脚本执行 JS , V8引擎都做了什么呢？")]),t._v(" "),s("ol",[s("li",[t._v("语法分析")]),t._v(" "),s("li",[t._v("预编译")]),t._v(" "),s("li",[t._v("解释执行")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("语法分析")]),t._v(" 就是V8引擎通篇扫描低级语法错误，看你的代码有什么低级的语法错误，"),s("strong",[t._v("但不执行")]),t._v("。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("预编译")]),t._v(" 简单理解就是在"),s("strong",[t._v("内存中开辟一些空间")]),t._v("，"),s("strong",[t._v("存放一些变量与函数")]),t._v("。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("解释执行")]),t._v(" 顾名思义便是执行代码了，在"),s("strong",[t._v("解释执行代码")]),t._v("前，必须先进行语法分析和预编译这两个步骤")])])])]),t._v(" "),s("p",[t._v("大家要明白，这个 "),s("strong",[t._v("预编译")]),t._v(" 和传统的编译是不一样的（可以理解js预编译为特殊的编译过程）")]),t._v(" "),s("p",[t._v("JavaScript是解释型语言，既然是解释型语言，就是编译一行，执行一行，传统的编译会经历很多步骤，分词、解析、代码生成什么的，理解了预编译对大家理解作用域同样有帮助。")]),t._v(" "),s("h2",{attrs:{id:"_2-js-预编译什么时候发生"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-js-预编译什么时候发生","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. JS 预编译什么时候发生")]),t._v(" "),s("p",[t._v("我当初思维误区也发生在这里")]),t._v(" "),s("p",[t._v("预编译到底什么时候发生")]),t._v(" "),s("p",[t._v("希望大家不要让上面的运行过程让你产生误会，")]),t._v(" "),s("p",[t._v("误以为预编译仅仅发生在script内代码块执行前")]),t._v(" "),s("p",[t._v("这倒并没有错")]),t._v(" "),s("p",[t._v("预编译确确实实在script代码内执行前发生了")]),t._v(" "),s("p",[t._v("但是它大部分会发生在 "),s("strong",[t._v("函数执行前")]),t._v(" ( 所以说 "),s("strong",[t._v("函数执行时")]),t._v("，预编译已经结束。)")]),t._v(" "),s("h2",{attrs:{id:"_3-js-预编译实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-js-预编译实例","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. JS 预编译实例")]),t._v(" "),s("p",[t._v("举例前，先来思考一下这几个概念：")]),t._v(" "),s("ul",[s("li",[t._v("变量声明 var…")]),t._v(" "),s("li",[t._v("函数声明 function…")])]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 变量声明")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("y")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//函数声明")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'so easy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("c")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//是变量声明而不是函数声明！！")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" d "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("让我们看看引擎对这段代码做了什么吧")]),t._v(" "),s("ul",[s("li",[t._v("页面产生便创建了GO全局对象（Global Object）（也就是大家熟悉的window对象）")]),t._v(" "),s("li",[t._v("第一个脚本文件加载")]),t._v(" "),s("li",[t._v("脚本加载完毕后，分析语法是否合法")]),t._v(" "),s("li",[t._v("开始预编译\n"),s("ul",[s("li",[t._v("查找变量声明，作为GO属性，值赋予undefined")]),t._v(" "),s("li",[t._v("查找函数声明，作为GO属性，值赋予函数体")])])])])])},[],!1,null,null,null);a.default=r.exports}}]);